2025/11/27 01:22:50 Starting TinyGraph cluster...
2025/11/27 01:22:50 Starting shard 0 replica 0...
2025/11/27 01:22:50 Starting shard 0 replica 1...
2025/11/27 01:22:50 Starting shard 0 replica 2...
2025/11/27 01:22:50 Starting shard 1 replica 0...
2025/11/27 01:22:50 Starting shard 1 replica 1...
2025/11/27 01:22:50 Starting shard 1 replica 2...
2025/11/27 01:22:50 Starting shard 2 replica 0...
2025/11/27 01:22:50 Starting shard 2 replica 1...
2025/11/27 01:22:50 Starting shard 2 replica 2...
2025/11/27 01:22:50 Waiting for shards to initialize...
2025-11-27T01:22:50.865Z [INFO]  raft: initial configuration: index=0 servers=[]
2025-11-27T01:22:50.865Z [INFO]  raft: entering follower state: follower="Node at 127.0.0.1:10098 [Follower]" leader-address= leader-id=
2025-11-27T01:22:50.869Z [INFO]  raft: initial configuration: index=0 servers=[]
2025-11-27T01:22:50.869Z [INFO]  raft: entering follower state: follower="Node at 127.0.0.1:10096 [Follower]" leader-address= leader-id=
2025-11-27T01:22:50.875Z [INFO]  raft: initial configuration: index=0 servers=[]
2025-11-27T01:22:50.875Z [INFO]  raft: entering follower state: follower="Node at 127.0.0.1:10092 [Follower]" leader-address= leader-id=
2025-11-27T01:22:50.877Z [INFO]  raft: initial configuration: index=0 servers=[]
2025-11-27T01:22:50.877Z [INFO]  raft: entering follower state: follower="Node at 127.0.0.1:10091 [Follower]" leader-address= leader-id=
2025-11-27T01:22:50.877Z [INFO]  raft: initial configuration: index=0 servers=[]
2025-11-27T01:22:50.877Z [INFO]  raft: entering follower state: follower="Node at 127.0.0.1:10095 [Follower]" leader-address= leader-id=
2025-11-27T01:22:50.878Z [INFO]  raft: initial configuration: index=0 servers=[]
2025-11-27T01:22:50.878Z [INFO]  raft: entering follower state: follower="Node at 127.0.0.1:10097 [Follower]" leader-address= leader-id=
2025-11-27T01:22:50.883Z [INFO]  raft: initial configuration: index=0 servers=[]
2025-11-27T01:22:50.884Z [INFO]  raft: entering follower state: follower="Node at 127.0.0.1:10099 [Follower]" leader-address= leader-id=
2025-11-27T01:22:50.884Z [INFO]  raft: initial configuration: index=0 servers=[]
2025-11-27T01:22:50.884Z [INFO]  raft: entering follower state: follower="Node at 127.0.0.1:10093 [Follower]" leader-address= leader-id=
2025-11-27T01:22:50.886Z [INFO]  raft: initial configuration: index=0 servers=[]
2025-11-27T01:22:50.886Z [INFO]  raft: entering follower state: follower="Node at 127.0.0.1:10094 [Follower]" leader-address= leader-id=
2025-11-27T01:22:51.918Z [WARN]  raft: heartbeat timeout reached, starting election: last-leader-addr= last-leader-id=
2025-11-27T01:22:51.918Z [INFO]  raft: entering candidate state: node="Node at 127.0.0.1:10091 [Candidate]" term=2
2025-11-27T01:22:51.918Z [DEBUG] raft: pre-voting for self: term=2 id=shard-0-replica-0
2025-11-27T01:22:51.918Z [DEBUG] raft: asking for pre-vote: term=2 from=shard-0-replica-1 address=localhost:10092
2025-11-27T01:22:51.918Z [DEBUG] raft: asking for pre-vote: term=2 from=shard-0-replica-2 address=localhost:10093
2025-11-27T01:22:51.918Z [DEBUG] raft: calculated votes needed: needed=2 term=2
2025-11-27T01:22:51.918Z [DEBUG] raft: pre-vote received: from=shard-0-replica-0 term=2 tally=0
2025-11-27T01:22:51.918Z [DEBUG] raft: pre-vote granted: from=shard-0-replica-0 term=2 tally=1
2025-11-27T01:22:51.919Z [DEBUG] raft: received a requestPreVote with a newer term, grant the pre-vote
2025-11-27T01:22:51.919Z [DEBUG] raft: received a requestPreVote with a newer term, grant the pre-vote
2025-11-27T01:22:51.919Z [DEBUG] raft: pre-vote received: from=shard-0-replica-2 term=2 tally=1
2025-11-27T01:22:51.919Z [DEBUG] raft: pre-vote granted: from=shard-0-replica-2 term=2 tally=2
2025-11-27T01:22:51.919Z [INFO]  raft: pre-vote successful, starting election: term=2 tally=2 refused=0 votesNeeded=2
2025-11-27T01:22:51.919Z [DEBUG] raft: voting for self: term=2 id=shard-0-replica-0
2025-11-27T01:22:51.920Z [DEBUG] raft: asking for vote: term=2 from=shard-0-replica-1 address=localhost:10092
2025-11-27T01:22:51.920Z [DEBUG] raft: asking for vote: term=2 from=shard-0-replica-2 address=localhost:10093
2025-11-27T01:22:51.920Z [DEBUG] raft: vote granted: from=shard-0-replica-0 term=2 tally=1
2025-11-27T01:22:51.920Z [DEBUG] raft: lost leadership because received a requestVote with a newer term
2025-11-27T01:22:51.920Z [DEBUG] raft: lost leadership because received a requestVote with a newer term
2025-11-27T01:22:51.920Z [DEBUG] raft: vote granted: from=shard-0-replica-1 term=2 tally=2
2025-11-27T01:22:51.920Z [INFO]  raft: election won: term=2 tally=2
2025-11-27T01:22:51.920Z [INFO]  raft: entering leader state: leader="Node at 127.0.0.1:10091 [Leader]"
2025-11-27T01:22:51.920Z [INFO]  raft: added peer, starting replication: peer=shard-0-replica-1
2025-11-27T01:22:51.920Z [INFO]  raft: added peer, starting replication: peer=shard-0-replica-2
2025-11-27T01:22:51.921Z [WARN]  raft: failed to get previous log: previous-index=1 last-index=0 error="log not found"
2025-11-27T01:22:51.921Z [WARN]  raft: failed to get previous log: previous-index=1 last-index=0 error="log not found"
2025-11-27T01:22:51.921Z [WARN]  raft: appendEntries rejected, sending older logs: peer="{Voter shard-0-replica-2 localhost:10093}" next=1
2025-11-27T01:22:51.921Z [WARN]  raft: appendEntries rejected, sending older logs: peer="{Voter shard-0-replica-1 localhost:10092}" next=1
2025-11-27T01:22:51.921Z [INFO]  raft: pipelining replication: peer="{Voter shard-0-replica-2 localhost:10093}"
2025-11-27T01:22:51.921Z [INFO]  raft: pipelining replication: peer="{Voter shard-0-replica-1 localhost:10092}"
2025-11-27T01:22:51.988Z [WARN]  raft: no known peers, aborting election
2025-11-27T01:22:52.129Z [WARN]  raft: heartbeat timeout reached, starting election: last-leader-addr= last-leader-id=
2025-11-27T01:22:52.129Z [INFO]  raft: entering candidate state: node="Node at 127.0.0.1:10094 [Candidate]" term=2
2025-11-27T01:22:52.129Z [DEBUG] raft: pre-voting for self: term=2 id=shard-1-replica-0
2025-11-27T01:22:52.129Z [DEBUG] raft: asking for pre-vote: term=2 from=shard-1-replica-1 address=localhost:10095
2025-11-27T01:22:52.129Z [DEBUG] raft: asking for pre-vote: term=2 from=shard-1-replica-2 address=localhost:10096
2025-11-27T01:22:52.129Z [DEBUG] raft: calculated votes needed: needed=2 term=2
2025-11-27T01:22:52.129Z [DEBUG] raft: pre-vote received: from=shard-1-replica-0 term=2 tally=0
2025-11-27T01:22:52.129Z [DEBUG] raft: pre-vote granted: from=shard-1-replica-0 term=2 tally=1
2025-11-27T01:22:52.130Z [DEBUG] raft: received a requestPreVote with a newer term, grant the pre-vote
2025-11-27T01:22:52.130Z [DEBUG] raft: received a requestPreVote with a newer term, grant the pre-vote
2025-11-27T01:22:52.130Z [DEBUG] raft: pre-vote received: from=shard-1-replica-1 term=2 tally=1
2025-11-27T01:22:52.131Z [DEBUG] raft: pre-vote granted: from=shard-1-replica-1 term=2 tally=2
2025-11-27T01:22:52.131Z [INFO]  raft: pre-vote successful, starting election: term=2 tally=2 refused=0 votesNeeded=2
2025-11-27T01:22:52.131Z [DEBUG] raft: voting for self: term=2 id=shard-1-replica-0
2025-11-27T01:22:52.131Z [DEBUG] raft: asking for vote: term=2 from=shard-1-replica-1 address=localhost:10095
2025-11-27T01:22:52.131Z [DEBUG] raft: asking for vote: term=2 from=shard-1-replica-2 address=localhost:10096
2025-11-27T01:22:52.131Z [DEBUG] raft: vote granted: from=shard-1-replica-0 term=2 tally=1
2025-11-27T01:22:52.131Z [DEBUG] raft: lost leadership because received a requestVote with a newer term
2025-11-27T01:22:52.131Z [DEBUG] raft: lost leadership because received a requestVote with a newer term
2025-11-27T01:22:52.131Z [DEBUG] raft: vote granted: from=shard-1-replica-1 term=2 tally=2
2025-11-27T01:22:52.131Z [INFO]  raft: election won: term=2 tally=2
2025-11-27T01:22:52.131Z [INFO]  raft: entering leader state: leader="Node at 127.0.0.1:10094 [Leader]"
2025-11-27T01:22:52.131Z [INFO]  raft: added peer, starting replication: peer=shard-1-replica-1
2025-11-27T01:22:52.131Z [INFO]  raft: added peer, starting replication: peer=shard-1-replica-2
2025-11-27T01:22:52.132Z [WARN]  raft: failed to get previous log: previous-index=1 last-index=0 error="log not found"
2025-11-27T01:22:52.132Z [WARN]  raft: failed to get previous log: previous-index=1 last-index=0 error="log not found"
2025-11-27T01:22:52.132Z [WARN]  raft: appendEntries rejected, sending older logs: peer="{Voter shard-1-replica-2 localhost:10096}" next=1
2025-11-27T01:22:52.132Z [WARN]  raft: appendEntries rejected, sending older logs: peer="{Voter shard-1-replica-1 localhost:10095}" next=1
2025-11-27T01:22:52.132Z [INFO]  raft: pipelining replication: peer="{Voter shard-1-replica-2 localhost:10096}"
2025-11-27T01:22:52.132Z [INFO]  raft: pipelining replication: peer="{Voter shard-1-replica-1 localhost:10095}"
2025/11/27 01:22:52 Starting query manager...
2025/11/27 01:22:52 Waiting for services to start...
2025-11-27T01:22:52.670Z [WARN]  raft: no known peers, aborting election
2025-11-27T01:22:52.783Z [WARN]  raft: no known peers, aborting election
2025-11-27T01:22:52.811Z [WARN]  raft: heartbeat timeout reached, starting election: last-leader-addr= last-leader-id=
2025-11-27T01:22:52.811Z [INFO]  raft: entering candidate state: node="Node at 127.0.0.1:10097 [Candidate]" term=2
2025-11-27T01:22:52.811Z [DEBUG] raft: pre-voting for self: term=2 id=shard-2-replica-0
2025-11-27T01:22:52.811Z [DEBUG] raft: asking for pre-vote: term=2 from=shard-2-replica-1 address=localhost:10098
2025-11-27T01:22:52.811Z [DEBUG] raft: asking for pre-vote: term=2 from=shard-2-replica-2 address=localhost:10099
2025-11-27T01:22:52.811Z [DEBUG] raft: calculated votes needed: needed=2 term=2
2025-11-27T01:22:52.811Z [DEBUG] raft: pre-vote received: from=shard-2-replica-0 term=2 tally=0
2025-11-27T01:22:52.811Z [DEBUG] raft: pre-vote granted: from=shard-2-replica-0 term=2 tally=1
2025-11-27T01:22:52.812Z [DEBUG] raft: received a requestPreVote with a newer term, grant the pre-vote
2025-11-27T01:22:52.812Z [DEBUG] raft: received a requestPreVote with a newer term, grant the pre-vote
2025-11-27T01:22:52.812Z [DEBUG] raft: pre-vote received: from=shard-2-replica-1 term=2 tally=1
2025-11-27T01:22:52.812Z [DEBUG] raft: pre-vote granted: from=shard-2-replica-1 term=2 tally=2
2025-11-27T01:22:52.812Z [INFO]  raft: pre-vote successful, starting election: term=2 tally=2 refused=0 votesNeeded=2
2025-11-27T01:22:52.812Z [DEBUG] raft: voting for self: term=2 id=shard-2-replica-0
2025-11-27T01:22:52.812Z [DEBUG] raft: asking for vote: term=2 from=shard-2-replica-1 address=localhost:10098
2025-11-27T01:22:52.812Z [DEBUG] raft: asking for vote: term=2 from=shard-2-replica-2 address=localhost:10099
2025-11-27T01:22:52.812Z [DEBUG] raft: vote granted: from=shard-2-replica-0 term=2 tally=1
2025-11-27T01:22:52.812Z [DEBUG] raft: lost leadership because received a requestVote with a newer term
2025-11-27T01:22:52.812Z [DEBUG] raft: lost leadership because received a requestVote with a newer term
2025-11-27T01:22:52.813Z [DEBUG] raft: vote granted: from=shard-2-replica-1 term=2 tally=2
2025-11-27T01:22:52.813Z [INFO]  raft: election won: term=2 tally=2
2025-11-27T01:22:52.813Z [INFO]  raft: entering leader state: leader="Node at 127.0.0.1:10097 [Leader]"
2025-11-27T01:22:52.813Z [INFO]  raft: added peer, starting replication: peer=shard-2-replica-1
2025-11-27T01:22:52.813Z [INFO]  raft: added peer, starting replication: peer=shard-2-replica-2
2025-11-27T01:22:52.813Z [WARN]  raft: failed to get previous log: previous-index=1 last-index=0 error="log not found"
2025-11-27T01:22:52.813Z [WARN]  raft: failed to get previous log: previous-index=1 last-index=0 error="log not found"
2025-11-27T01:22:52.813Z [WARN]  raft: appendEntries rejected, sending older logs: peer="{Voter shard-2-replica-1 localhost:10098}" next=1
2025-11-27T01:22:52.813Z [WARN]  raft: appendEntries rejected, sending older logs: peer="{Voter shard-2-replica-2 localhost:10099}" next=1
2025-11-27T01:22:52.814Z [INFO]  raft: pipelining replication: peer="{Voter shard-2-replica-1 localhost:10098}"
2025-11-27T01:22:52.814Z [INFO]  raft: pipelining replication: peer="{Voter shard-2-replica-2 localhost:10099}"
2025/11/27 01:22:55 ✓ Cluster started successfully!
2025/11/27 01:22:55 ✓ Query manager available at localhost:9090
2025/11/27 01:22:55 ✓ Running 3 shard(s) with 3 replica(s) each
2025/11/27 01:22:55 
Press Ctrl+C to stop the cluster...
2025/11/27 02:22:02 
Shutting down cluster...
2025/11/27 02:22:02 Cluster stopped.
